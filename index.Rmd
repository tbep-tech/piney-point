---
title: "AMBIENT MONITORING DATA NEAR PINEY POINT"
output: 
  flexdashboard::flex_dashboard:
    logo: www/tarponlogo.png
social: menu
source_code: "https://github.com/tbep-tech/piney-point"
css: styles.css
---
  
```{r setup, include=F}
knitr::opts_chunk$set(echo = F, message = F, warning = F)

# libraries
library(flexdashboard)
library(mapview)
library(tidyverse)
library(sf)
library(plotly)
library(leafem)
library(colorspace)

source('R/funcs.R')

load('data/wqdat.RData')
load('data/wqdatsub.RData')
load('data/statloc.RData')

cols <- qualitative_hcl(length(unique(wqdat$var)), palette = "Dynamic")
```

COMPLETE TIME SERIES
=======================================================================

Column {data-width=275}
-----------------------------------------------------------------------

### Station locations

```{r}
mapview(statloc, zcol = 'source', homebutton = F, layer.name = 'Data source') %>% 
  addStaticLabels(label = statloc$station,
                  noHide = TRUE,
                  direction = 'top',
                  textOnly = TRUE,
                  textsize = "20px", 
                  offset = c(0, 1))
```

Column {.tabset .tabset-fade data-width=650}
-----------------------------------------------------------------------
### STATION 20

```{r}
plo_fun(wqdat, '20', cols)
```
### STATION 21

```{r}
plo_fun(wqdat, '21', cols)
```

### STATION 90

```{r}
plo_fun(wqdat, '90', cols)
```

### STATION 336 

```{r}
plo_fun(wqdat, '336', cols)
```

### STATION 357

```{r}
plo_fun(wqdat, '357', cols)
```

### STATION 361

```{r}
plo_fun(wqdat, '361', cols)
```

### STATION 362
```{r}
plo_fun(wqdat, '362', cols)
```


MARCH, APRIL ONLY
=======================================================================

Column {data-width=275}
-----------------------------------------------------------------------

### Station locations

```{r}
mapview(statloc, zcol = 'source', homebutton = F, layer.name = 'Data source') %>% 
  addStaticLabels(label = statloc$station,
                  noHide = TRUE,
                  direction = 'top',
                  textOnly = TRUE,
                  textsize = "20px", 
                  offset = c(0, 1))
```

Column {.tabset .tabset-fade data-width=650}
-----------------------------------------------------------------------
### STATION 20

```{r}
plo_fun(wqdatsub, '20', cols)
```
### STATION 21

```{r}
plo_fun(wqdatsub, '21', cols)
```
### STATION 90

```{r}
plo_fun(wqdatsub, '90', cols)
```

### STATION 336 

```{r}
plo_fun(wqdatsub, '336', cols)
```

### STATION 357

```{r}
plo_fun(wqdatsub, '357', cols)
```

### STATION 361

```{r}
plo_fun(wqdatsub, '361', cols)
```

### STATION 362
```{r}
plo_fun(wqdatsub, '362', cols)
```